<!-- Stalker a Production Asset Management System
 Copyright (C) 2009-2013 Erkan Ozgur Yilmaz

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation;
 version 2.1 of the License.

 This library is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 Lesser General Public License for more details.

 You should have received a copy of the GNU Lesser General Public
 License along with this library; if not, write to the Free Software
 Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
-->
<div class='dijitDialogPaneContentArea'>

</div>

<div class='dijitDialogPaneActionBar'>
  <button id='user_add_button'>Add</button>
  <button id='user_cancel_button'>Cancel</button>
</div>

<script type="text/javascript">
  require(["dgrid/List", "dgrid/OnDemandGrid", "dgrid/Selection",
    "dgrid/Keyboard", "dgrid/editor", "dijit/form/CheckBox",
    "dijit/form/TimeTextBox",  "dijit/form/Select","dojo/data/ObjectStore",
    "dijit/form/FilteringSelect", "dojo/_base/declare", "dgrid/test/data/base",
    "dojo/domReady!"],
          function(List, Grid, Selection, Keyboard, editor, CheckBox,
                   TimeTextBox, Select, ObjectStore, FilteringSelect,
                   declare){

            stateStore = new ObjectStore({
              objectStore:testStateStore,
              labelProperty: "name"
            });

            var columns = [
              {field: "id", label: "id"},
              editor({
                label: "CheckBox",
                field: "bool2",
                editorArgs: {
                  value: "checked"
                }
              }, CheckBox),
              editor({label: "Time", field: "date2", editorArgs: {
                timePattern: "HH:mm:ss",
                clickableIncrement: "T00:15:00",
                visibleIncrement: "T00:15:00",
                visibleRange: "T01:00:00"}}, TimeTextBox),
              editor({
                label: "Select Options",
                field: "bool",
                get: function(item){
                  // return as string to match option in list
                  return "" + item.bool;
                },
                set: function(item){
                  // convert back to boolean from string
                  return item.bool == "true";
                },
                editorArgs: {
                  style: "width:75px;",
                  options: [
                    {value: "true", label: "true"},
                    {value: "false", label: "false"}
                  ]
                }
              }, Select, "dblclick"),
              editor({
                label: "Select Store",
                field: "state",
                editorArgs: {
                  store: stateStore,
                  maxHeight: 150,
                  style: "width:120px;"
                }
              }, Select, "click"),
              editor({
                label: "FilteringSelect Store",
                field: "state2",
                editorArgs: {
                  store: stateStore,
                  maxHeight: 150,
                  style: "width:120px;"
                }
              }, FilteringSelect)
              // Note that mileage may vary with editOn + widgets with multiple focusable children, e.g. dijit/Editor
            ];


            window.grid = new (declare([Grid, Selection, Keyboard]))({
              store: testTypesStore,
              columns: columns,
              selectionMode: "none"
            }, "grid");

            grid.on("dgrid-datachange", function(evt){
              console.log("data changed: ", evt.oldValue, " -> ", evt.value);
              console.log("cell: ", evt.cell, evt.cell.row.id);
            });
          });
</script>
